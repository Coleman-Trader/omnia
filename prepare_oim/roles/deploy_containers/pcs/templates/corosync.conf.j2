totem {
    version: 2
    secauth: off
    threads: 0
    transport: udpu
}

quorum {
  provider: corosync_votequorum
  two_node: 1
}

nodelist {
  node {
    ring0_addr: {{ admin_nic_ip }}
    name: {{ oim_node_name }}
    nodeid: 1
  }
{% if hostvars['localhost']['oim_ha_data'].ansible_facts.oim_ha.enable_oim_ha %}
{%- for node_details in hostvars['localhost']['oim_ha_data'].ansible_facts.oim_ha.passive_nodes.node_details %}
{% if node_details.ADMIN_IP is defined %}
  node {
    ring0_addr: {{ node_details.ADMIN_IP }}
    name: {{ node_details.HOSTNAME }}
    nodeid: {{ loop.index + 1 }}
  }
{% endif %}
{%- endfor %}
{% endif %}

}

logging {
  to_logfile: yes
  logfile: /var/log/cluster/corosync.log
  to_syslog: yes
  timestamp: on
}
