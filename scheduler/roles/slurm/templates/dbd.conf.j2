# ADD DEFAULTS
{% for key in slurm_dbd_conf_dict | sort %}
{% set val = slurm_dbd_conf_dict[key] %}
{% if val is not none and val != omit %}
{{ key }}={{ 'yes' if val is sameas true else ('no' if val is sameas false else val) }}
{% endif %}
{% endfor %}

{% if 'slurm_dbd' in groups %}
# USER DEFINED SLURM DBD INFO
DbdHost={{ groups['slurm_dbd'][0] }}
DbdPort={{ slurm_dbd_port }}
{% endif %}

# DATABASE INFO
StorageHost={{ db_host }}
{% if db_port is not none and db_port != omit %}
StoragePort={{ db_port }}
{% endif %}
StorageUser={{ slurm_db_username }}
StoragePass={{ slurm_db_password }}