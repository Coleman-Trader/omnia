totem {
    version: 2
    secauth: off
    threads: 0
    transport: udpu
}

quorum {
    provider: corosync_votequorum
    two_node: 1
}

nodelist {
{% if active_node is defined and passive_nodes is defined %}
  node {
    ring0_addr: {{ active_node.admin_ip }}
    name: {{ active_node.hostname }}
    nodeid: 1
  }
{% for node in passive_nodes %}
  node {
    ring0_addr: {{ node.admin_ip }}
    name: {{ node.hostname }}
    nodeid: {{ loop.index + 1 }}
  }
{% endfor %}
{% else %}
  node {
    ring0_addr: {{ service_admin_nic_ip }}
    name: {{ service_node_name }}
    nodeid: 1
  }
{% endif %}
}

logging {
    to_logfile: yes
    logfile: /var/log/cluster/corosync.log
    to_syslog: yes
    timestamp: on
}
